### Test MCP HTTP Server with Auth0
### Use the REST Client extension in VS Code to run these requests

### Variables
@baseUrl = http://127.0.0.1:8080
@mcpPath = /mcp
@origin = http://localhost:8080
# Replace with your actual token from /tmp/auth0-token.txt or run /tmp/get-auth0-token.sh
@token = 

### Test 1: Request without Authorization header
### Should return 401 with WWW-Authenticate header
GET {{baseUrl}}{{mcpPath}}
Origin: {{origin}}

###

### Test 2: Request with invalid token
### Should return 401 with WWW-Authenticate header showing error="invalid_token"
GET {{baseUrl}}{{mcpPath}}
Origin: {{origin}}
Authorization: Bearer invalid-token-12345

###

### Test 3: Request with valid token
### Should return 200 and MCP response
POST {{baseUrl}}{{mcpPath}}
Origin: {{origin}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/list"
}

###

### Test 4: Get Neo4j schema with valid token
POST {{baseUrl}}{{mcpPath}}
Origin: {{origin}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "id": 2,
  "method": "tools/call",
  "params": {
    "name": "get-schema",
    "arguments": {}
  }
}

###
